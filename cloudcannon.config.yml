# 1. Cấu hình đường dẫn chung
paths:
  uploads: assets/image
  static: assets # Đổi thành assets để CloudCannon hiểu đúng gốc của file tĩnh

# 2. Cấu hình các file dữ liệu đơn lẻ
data_config:
  settings:
    path: assets/content/settings.json
    name: Cấu hình Website
    icon: settings
    description: Thay đổi Menu, Banner và link mạng xã hội

# 3. Cấu hình danh sách bài viết (Góc Tản Mạn)
collections_config:
  posts:
    path: assets/content
    # Ép tên file mới tạo luôn là tiếng Anh/Số, không dấu
    file_config:
      name_template: "post-{date}.json" 
    create:
      path: "assets/content/{slug}.json"
    slug:
      from_config: title
      remove_accents: true
      case: lowercase
    
    # QUAN TRỌNG: Tự động biến tiêu đề thành tên file không dấu, gạch ngang
    create:
      path: "assets/content/{slug}.json"
    slug:
      from_config: title
      remove_accents: true # Xóa dấu tiếng Việt
      case: lowercase      # Viết thường hết
      
    # QUAN TRỌNG: Sửa lỗi đường dẫn ảnh khi lưu
    configuration:
      uploads:
        path: assets/image
        base_url: "" # Ngăn việc chèn dấu / ở đầu đường dẫn

    filter:
      exclude:
        - settings.json
        - template-tan-man.json
        - tieu-de-bai-viet-mau.json

    schemas:
      default:
        path: assets/content/template-tan-man.json

    config:
      card:
        title: title
        image: image
        subtext: date

# 4. Giao diện nhập liệu (Editor UI)
_inputs:
  title:
    type: text
    comment: "Tiêu đề bài viết (Sẽ được tự động dùng làm tên file không dấu)"
  date:
    type: date
  category:
    type: select
    options:
      values:
        - tan-man
        - phim
        - show
  image:
    type: image
    comment: "Chọn ảnh từ assets/image. Code sẽ tự động sửa đường dẫn nếu sai."
  description:
    type: textarea
  body:
    type: markdown
    comment: "Nội dung chính của bài viết"

  menu:
    type: array
    item_options:
      value_key: name
  sub_menu:
    type: array
    item_options:
      value_key: name